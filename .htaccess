# Tailoring Management System - WAMP Compatible Configuration
# Minimal .htaccess for WAMP server compatibility

# Enable URL rewriting
RewriteEngine On

# Redirect old authentication URLs to admin folder
RewriteRule ^login\.php$ /tailoring/admin/login.php [R=301,L]
RewriteRule ^register\.php$ /tailoring/admin/register.php [R=301,L]
RewriteRule ^logout\.php$ /tailoring/admin/logout.php [R=301,L]
RewriteRule ^settings\.php$ /tailoring/admin/settings.php [R=301,L]

# Redirect admin utility files to admin folder
RewriteRule ^setup_measurement_charts\.php$ /tailoring/admin/setup_measurement_charts.php [R=301,L]
RewriteRule ^setup_multi_tenant\.php$ /tailoring/admin/setup_multi_tenant.php [R=301,L]
RewriteRule ^auto_fix_user\.php$ /tailoring/admin/auto_fix_user.php [R=301,L]
RewriteRule ^fix_measurement_charts\.php$ /tailoring/admin/fix_measurement_charts.php [R=301,L]
RewriteRule ^fix_user_session\.php$ /tailoring/admin/fix_user_session.php [R=301,L]
RewriteRule ^force_reset_password\.php$ /tailoring/admin/force_reset_password.php [R=301,L]
RewriteRule ^check_measurement_charts\.php$ /tailoring/admin/check_measurement_charts.php [R=301,L]
RewriteRule ^test_login\.php$ /tailoring/admin/test_login.php [R=301,L]
RewriteRule ^info\.php$ /tailoring/admin/info.php [R=301,L]

# Handle 404 errors
ErrorDocument 404 /tailoring/404.php

# Protect sensitive files (WAMP compatible syntax)
<Files "*.sql">
    Require all denied
</Files>

<Files "*.log">
    Require all denied
</Files>

<Files "config.php">
    Require all denied
</Files>

<Files "database.php">
    Require all denied
</Files>

# Protect installation file after setup
<Files "install.php">
    Require all denied
</Files>

# Prevent access to hidden files
<FilesMatch "^\.">
    Require all denied
</FilesMatch>

# Prevent access to backup files
<FilesMatch "\.(bak|backup|old|tmp)$">
    Require all denied
</FilesMatch>